# Retail Transaction Recommendation System with Marketing & Sell-Through Loop

> A business-aware recommendation system built from transaction data, integrating  
> **sequential modeling, user value segmentation, and inventory sell-through constraints**

---

## ðŸ“Œ Project Motivation

Most recommendation systems focus solely on algorithmic relevance metrics  
(e.g. Recall, NDCG), while ignoring real-world business constraints such as:

- Different user value levels require different recommendation strategies
- Pure model-based recommendations may worsen inventory backlog
- Recommendation results are often hard to interpret from an operational perspective

**This project aims to build a closed-loop recommendation framework that is:**

- Algorithmically effective
- User-aware
- Business- and inventory-responsible

---

## ðŸ“¦ Dataset

- **UCI Online Retail II**
- Transaction-level data with fields such as:
  - Invoice, StockCode, Quantity, InvoiceDate, Price, Customer ID, Country

---

## ðŸ§  Overall Architecture

The project is structured into three layers:
Aï½œRecommendation Model (Algorithm)
Bï½œUser Value Segmentation (Marketing)
Cï½œSell-Through & Inventory-Aware Strategy (Business)


Each layer incrementally constrains and refines the final recommendation output.

---

## Aï½œSequential Recommendation (Algorithm Layer)

**Objective**  
Predict the next item a user is likely to purchase based on historical transactions.

### Approach
- Sequence modeling using **GRU** and **Transformer**
- Input: user purchase history (item sequence)
- Output: next-item probability distribution

### Key Design Choices
- Last-item holdout to prevent data leakage
- Supports:
  - Full softmax cross-entropy
  - In-batch negative sampling
- Baselines: Popularity-based, Markov Chain
- Metrics: **Recall@K**, **NDCG@K**

ðŸ“‚ Outputs:
- `train_next.csv`, `val_next.csv`
- Trained model checkpoint: `best.pt`

---

## Bï½œUser Value Segmentation (Marketing Layer)

**Motivation**  
Even with a strong model, not all users should be treated equally.

### Method
- RFM analysis based on transaction data
- Users segmented into:
  - **Champions**
  - **Potential**
  - **At_Risk**
  - **Low_Value**

### Purpose
- Enable differentiated recommendation strategies
- Provide interpretable user-level context for downstream decisions

ðŸ“‚ Outputs:
- `user_rfm.csv`
- `user_segments.csv`
- `segment_top_items.csv`

---

## Cï½œSell-Through & Inventory-Aware Strategy (Business Layer)

**Motivation**  
Recommendations should not only be relevant, but also support inventory turnover.

---

### Item Sell-Through Profiling

- Based on recent rolling window sales (e.g. 30 days)
- Items categorized as:
  - **fast** (high sell-through)
  - **slow** (low sell-through)
  - **dead** (no recent sales)

ðŸ“‚ Output:
- `item_sellthrough.csv`

---

### Strategy Generation (User Ã— Business)

Final recommendation lists are generated by combining:

- User segment (from B)
- Item sell-through status
- Strategy rules

Examples:
- **Champions**: model / segment preference driven, fast-dominant with limited slow mixing
- **Potential**: hybrid (model + rules), conservative for conversion
- **At_Risk**: historical frequent items (familiarity) + controlled slow items
- **Low_Value**: balanced fast / slow exposure

ðŸ“‚ Output:
- `user_strategy_items.csv`

---

### Strategy Audit (Sell-Through Evaluation)

Instead of retraining models, we **audit the business structure** of recommendations:

- Measure fast / slow / dead item ratios per strategy
- Detect extreme or unintended strategy drift

ðŸ“‚ Output:
- `strategy_sellthrough_mix.csv`

This step ensures strategies align with business intent rather than enforcing fixed ratios.

---

## ðŸŽ¯ Key Contributions

- Moves beyond metric-only optimization to **business-aware recommendation**
- Explicit separation of:
  - Algorithm relevance (A)
  - User heterogeneity (B)
  - Inventory & operations constraints (C)
- Provides a **controllable, interpretable, and auditable** recommendation loop
- Practical for real-world retail, e-commerce, and trade scenarios

---

## ðŸ›  Tech Stack

- Python, Pandas, PyTorch
- GRU, Transformer
- Offline evaluation:
  - Recall@K
  - NDCG@K
  - Sell-through ratio analysis

---

## ðŸ“Ž Applicable Scenarios

- Retail & E-commerce Recommendation Systems
- Precision Marketing
- Business-aware AI / Decision Systems

---

## ðŸ§© Keywords

`Sequential Recommendation`  
`RFM Segmentation`  
`Business-Aware Recommendation`  
`Inventory Sell-Through`  
`AI Ã— Marketing Ã— Operations`

